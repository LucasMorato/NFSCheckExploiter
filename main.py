#!/usr/bin/env python3

import os
#instala o python-nmap
os.system('pip install python-nmap' + ' > /dev/null')

import sys
import nmap
import time

def scan(host):
    
    try:
    
        #criando um scanner
        scanner = nmap.PortScanner()
        
        #verificando as portas
        scanner.scan(host, '111,2049')
        
        #imprimindo o status da porta 111
        print('Status da porta 111:', scanner[host]['tcp'][111]['state'])

        #imprimindo o status da porta 2049
        print('Status da porta 2049:', scanner[host]['tcp'][2049]['state']) #+ ' > /dev/null'
    
    except:
        print('O host/portas não estão respondendo, pode haver algum firewall bloqueando ou host não existe.')
    
    
#time.sleep(2) # espera por 2 segundos

######## args
if __name__ == "__main__":
    if len(sys.argv) != 3:
        print('Parâmetros incorretos. Por favor utilize \"--target <host>\"')
        exit(1)

    if sys.argv[1] == '--target':
        host = sys.argv[2]
        result = scan(host)        
    else:
        print('Parâmetros incorretos. Por favor utilize \"--target <host>\"')
        exit(1)
